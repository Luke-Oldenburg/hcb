<%= form_with(model: event, local: true, class: "mb3") do |form| %>
  <%= form_errors event, "organization" %>
  <% unless event.unapproved? %>
    <div class="card">
      <div class="field field--checkbox">
        <%= form.check_box :donation_page_enabled, disabled: !policy(event).update?, switch: true %>
        <%= form.label :donation_page_enabled, "Enable donation page" %>
      </div>
      <%= form.fields_for :config do |config| %>
        <div class="field field--checkbox">
          <%= config.check_box :anonymous_donations, disabled: !policy(event).update?, switch: true %>
          <%= config.label :anonymous_donations, "Enable anonymous donations" %>
        </div>
      <% end %>
      <div class="field">
        <%= form.label :donation_page_message, "Message to show on donation page" %>
        <%= form.text_area :donation_page_message, class: "w-100 fit", disabled: !policy(event).update? %>
        <%= inline_icon "markdown", size: 32, class: "muted right" %>
      </div>
      <div class="field">
        <%= form.label :donation_thank_you_message, "Thank you message to donors" %>
        <%= form.text_area :donation_thank_you_message, class: "w-100 fit", disabled: !policy(event).update? %>
        <%= inline_icon "markdown", size: 32, class: "muted right" %>
      </div>
      <div class="field">
        <%= form.label :donation_reply_to_email, "Reply-to email for donation receipts" %>
        <%= form.text_field :donation_reply_to_email, type: "email", placeholder: "fiona@hackclub.com", class: "w-100 fit", disabled: !policy(event).update? %>
      </div>
      <%= form.submit "Update", class: ("disabled" unless policy(event).update?) %>
    </div>
  <% end %>
<% end %>
