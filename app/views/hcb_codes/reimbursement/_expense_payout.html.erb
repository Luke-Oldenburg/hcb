<% expense = @hcb_code.reimbursement_expense_payout.expense %>

<div class="mt4 mb2">
  <article class="card pb0 mt3 mb1">
    <%= render "heading", hcb_code: @hcb_code, render_memo: true %>

    <section class="card__banner card__darker details-horiz border-top">
      <p>
        <strong>Date</strong>
        <%= format_date @hcb_code.date %>
      </p>
      <p>
        <strong>Type</strong>
        Reimbursed Expense
      </p>
    </section>
    <section class='details pt2 pb2'>
      <% if Flipper.enabled?(:transaction_tags_2022_07_29, (@event || @hcb_code.event)) %>
        <%= render "hcb_codes/tags", hcb_code: @hcb_code, event: @event || @hcb_code.event %>
      <% end %>
      <p>
        <strong>Associated Report</strong>
        <%= link_to expense.report.name, expense.report, data: { turbo_frame: "_top" } %>
      </p>
      <% if expense.description.present? %>
        <p>
          <strong>Description</strong>
          <%= expense.description %>
        </p>
      <% end %>
    </section>

  </article>
  <div class="flex justify-end align-middle flex-wrap hcb_code_actions" style="gap: 12px">
    <%= render partial: "hcb_codes/pin", locals: { hcb_code: @hcb_code } %>
  </div>
</div>

<div class="mb4">
  <%= render partial: "receipts/receipt", collection: expense.receipts.order(created_at: :asc), as: :receipt, locals: { link_to_file: true, popover: @frame ? "HcbCode:#{@hcb_code.hashid}" : nil } %>
</div>
